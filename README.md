# prompt 聚类&可视化

代码分为两个部分：`get_embeddings` 和 `get_cluster`.

默认的设置是 "bert-base-uncased" 取最后一层第一个字符的表征作为语义向量。

降维到 3 维，并使用KMeans聚类，默认聚成10个类别。

> PS: 其他聚类算法（尤其是密度聚类）超参数敏感需要针对不同的标准进行调整，否则会聚成一大块或者上千个小类别。KMeans虽然要设置 n_clusters 但是稳定。

## 执行

`run_cluster.sh` 脚本，执行过程中会存储多个中间变量在output文件夹中，主要有表征文件，降维后的表征文件，最终聚类结果，可视化文件。

如果需要更新上述`表征文件，降维后的表征文件`需要删除这些文件，否则会默认从缓存加载。


## 可视化

使用 `safari` 浏览器打开 `visualizer.html` 文件，随后将 `output` 文件夹下的 `xxx.vis.json` 文件拖拽到最上面框子内等待一会即可点击可视化的点查看数据。

或者直接进入`output`目录下面的`xxx-聚类算法-grouped`文件夹，不同的文件即不同类别的数据。
